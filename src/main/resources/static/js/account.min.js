$(document).ready(function(){let e=function(e){if(e.files&&e.files[0]){let s=new FileReader;s.onload=function(s){$("#imageInput").attr("value",s.target.result);let a=new FormData;a.append("file",e.files[0]),$.ajax({type:"POST",url:"account/avatar",data:a,cache:!1,contentType:!1,processData:!1,success:function(){$("#imageInput").attr("value",""),$(".profile-pic").attr("src",s.target.result)}})},s.readAsDataURL(e.files[0])}};$(".file-upload").on("change",function(){e(this)}),$(".upload-button").on("click",function(){$(".file-upload").click()}),$("#send-pass").on("click",function(){let e=$("#inputPasswordOld").val(),s=$("#inputPasswordNew").val(),a=$("#inputPasswordNewVerify").val();if(""==e){$("#pass-error-header").removeClass("d-none"),$("#pass-error").text(errOldPass);return}if(""==s){$("#pass-error-header").removeClass("d-none"),$("#pass-error").text(errNewPass);return}if(""==a){$("#pass-error-header").removeClass("d-none"),$("#pass-error").text(errVerifyPass);return}if(!s.match("[w]{8,32}")){$("#pass-error-header").removeClass("d-none"),$("#pass-error").text(errVerifyPassMatch);return}if(s!=a){$("#pass-error-header").removeClass("d-none"),$("#pass-error").text(errNotEquals);return}$("#pass-error-header").hasClass("d-none")?$("#pass-success-header").hasClass("d-none")||$("#pass-success-header").addClass("d-none"):$("#pass-error-header").addClass("d-none");let r=new FormData;r.append("oldPassword",e),r.append("newPassword",s),$.ajax({type:"POST",url:"account/change-password",data:r,cache:!1,contentType:!1,processData:!1,complete:function(e,s){200==e.status?$("#pass-success-header").removeClass("d-none"):403==e.status?($("#pass-error-header").removeClass("d-none"),$("#pass-error").text(errWrongPass)):($("#pass-error-header").removeClass("d-none"),$("#pass-error").text(errSome))}})}),$("#pass-modal").on("hidden.bs.modal",function(){$("#pass-error-header").hasClass("d-none")?$("#pass-success-header").hasClass("d-none")||$("#pass-success-header").addClass("d-none"):$("#pass-error-header").addClass("d-none")}),$("#change-token").on("click",function(){$.ajax({type:"POST",url:"account/change-token",cache:!1,contentType:!1,processData:!1,success:function(e){$("#hash").text(e)}})})});